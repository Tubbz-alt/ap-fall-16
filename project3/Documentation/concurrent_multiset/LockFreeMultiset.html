<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_101) on Wed Dec 28 20:11:50 CET 2016 -->
<title>LockFreeMultiset</title>
<meta name="date" content="2016-12-28">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="LockFreeMultiset";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LockFreeMultiset.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../concurrent_multiset/LazyMultiset.MultisetElement.html" title="class in concurrent_multiset"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../concurrent_multiset/LockFreeMultiset.MultisetElement.html" title="class in concurrent_multiset"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?concurrent_multiset/LockFreeMultiset.html" target="_top">Frames</a></li>
<li><a href="LockFreeMultiset.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">concurrent_multiset</div>
<h2 title="Class LockFreeMultiset" class="title">Class LockFreeMultiset&lt;T&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>concurrent_multiset.LockFreeMultiset&lt;T&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of the elements that can be inserted in the multiset</dd>
</dl>
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../concurrent_multiset/ConcurrentMultiset.html" title="interface in concurrent_multiset">ConcurrentMultiset</a>&lt;T&gt;</dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">LockFreeMultiset&lt;T&gt;</span>
extends java.lang.Object
implements <a href="../concurrent_multiset/ConcurrentMultiset.html" title="interface in concurrent_multiset">ConcurrentMultiset</a>&lt;T&gt;</pre>
<div class="block">The lock free implementation of a concurrent multiset.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Alessandra Fais</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../concurrent_multiset/LockFreeMultiset.MultisetElement.html" title="class in concurrent_multiset">LockFreeMultiset.MultisetElement</a>&lt;<a href="../concurrent_multiset/LockFreeMultiset.MultisetElement.html" title="type parameter in LockFreeMultiset.MultisetElement">T</a>&gt;</span></code>
<div class="block">The class that defines the entry of a lock free multiset.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.concurrent.atomic.AtomicInteger</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../concurrent_multiset/LockFreeMultiset.html#actual_size">actual_size</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.Integer</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../concurrent_multiset/LockFreeMultiset.html#capacity">capacity</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../concurrent_multiset/LockFreeMultiset.MultisetElement.html" title="class in concurrent_multiset">LockFreeMultiset.MultisetElement</a>&lt;<a href="../concurrent_multiset/LockFreeMultiset.html" title="type parameter in LockFreeMultiset">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../concurrent_multiset/LockFreeMultiset.html#head">head</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../concurrent_multiset/MultisetLock.html" title="class in concurrent_multiset">MultisetLock</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../concurrent_multiset/LockFreeMultiset.html#read_only_multiset">read_only_multiset</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.concurrent.atomic.AtomicInteger</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../concurrent_multiset/LockFreeMultiset.html#size">size</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../concurrent_multiset/LockFreeMultiset.html#LockFreeMultiset-int-">LockFreeMultiset</a></span>(int&nbsp;capacity)</code>
<div class="block">Constructor of the lock free multiset.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../concurrent_multiset/LockFreeMultiset.html#add-T-">add</a></span>(<a href="../concurrent_multiset/LockFreeMultiset.html" title="type parameter in LockFreeMultiset">T</a>&nbsp;element)</code>
<div class="block">Adds a single occurrence of the specified element to the multiset.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../concurrent_multiset/LockFreeMultiset.html#add-T-int-">add</a></span>(<a href="../concurrent_multiset/LockFreeMultiset.html" title="type parameter in LockFreeMultiset">T</a>&nbsp;element,
   int&nbsp;occurrences)</code>
<div class="block">Adds a number of occurrences of the specified element to the multiset.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../concurrent_multiset/LockFreeMultiset.html#contains-java.lang.Object-">contains</a></span>(java.lang.Object&nbsp;element)</code>
<div class="block">Determines whether the multiset contains the specified elements or not.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../concurrent_multiset/LockFreeMultiset.html#count-java.lang.Object-">count</a></span>(java.lang.Object&nbsp;element)</code>
<div class="block">Returns the number of occurrences of the specified element in the multiset.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../concurrent_multiset/LockFreeMultiset.html#getActualSize--">getActualSize</a></span>()</code>
<div class="block">Returns the number of elements (the summation of the the occurrences of all the
 elements contained in the multiset).</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../concurrent_multiset/LockFreeMultiset.html#getSize--">getSize</a></span>()</code>
<div class="block">Returns the number of <code>MultisetElement</code> entries inside the multiset.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../concurrent_multiset/LockFreeMultiset.html#remove-java.lang.Object-">remove</a></span>(java.lang.Object&nbsp;element)</code>
<div class="block">Removes a single occurrence of the specified element from the multiset, if
 it is present.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../concurrent_multiset/LockFreeMultiset.html#remove-java.lang.Object-int-">remove</a></span>(java.lang.Object&nbsp;element,
      int&nbsp;occurrences)</code>
<div class="block">Removes a number of occurrences of the specified element from the multiset.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../concurrent_multiset/LockFreeMultiset.html#removeAll-java.util.Collection-">removeAll</a></span>(java.util.Collection&nbsp;c)</code>
<div class="block">Removes all the elements of the collection from the multiset.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>private <a href="../concurrent_multiset/LockFreeMultiset.MultisetElement.html" title="class in concurrent_multiset">LockFreeMultiset.MultisetElement</a>&lt;<a href="../concurrent_multiset/LockFreeMultiset.html" title="type parameter in LockFreeMultiset">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../concurrent_multiset/LockFreeMultiset.html#search-java.lang.Object-">search</a></span>(java.lang.Object&nbsp;element)</code>
<div class="block">Searches the element inside the multiset.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private <a href="../concurrent_multiset/LockFreeMultiset.MultisetElement.html" title="class in concurrent_multiset">LockFreeMultiset.MultisetElement</a>&lt;<a href="../concurrent_multiset/LockFreeMultiset.html" title="type parameter in LockFreeMultiset">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../concurrent_multiset/LockFreeMultiset.html#searchAndClean-java.lang.Object-">searchAndClean</a></span>(java.lang.Object&nbsp;value)</code>
<div class="block">Searches an element and while traverses the multiset cleans it up
 from the entries that have been logically removed.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../concurrent_multiset/LockFreeMultiset.html#toString--">toString</a></span>()</code></td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="size">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>size</h4>
<pre>private volatile&nbsp;java.util.concurrent.atomic.AtomicInteger size</pre>
</li>
</ul>
<a name="actual_size">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>actual_size</h4>
<pre>private volatile&nbsp;java.util.concurrent.atomic.AtomicInteger actual_size</pre>
</li>
</ul>
<a name="capacity">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>capacity</h4>
<pre>private final&nbsp;java.lang.Integer capacity</pre>
</li>
</ul>
<a name="head">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>head</h4>
<pre>private final&nbsp;<a href="../concurrent_multiset/LockFreeMultiset.MultisetElement.html" title="class in concurrent_multiset">LockFreeMultiset.MultisetElement</a>&lt;<a href="../concurrent_multiset/LockFreeMultiset.html" title="type parameter in LockFreeMultiset">T</a>&gt; head</pre>
</li>
</ul>
<a name="read_only_multiset">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>read_only_multiset</h4>
<pre>private&nbsp;<a href="../concurrent_multiset/MultisetLock.html" title="class in concurrent_multiset">MultisetLock</a> read_only_multiset</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="LockFreeMultiset-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>LockFreeMultiset</h4>
<pre>public&nbsp;LockFreeMultiset(int&nbsp;capacity)</pre>
<div class="block">Constructor of the lock free multiset.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>capacity</code> - the maximum number of elements that the multiset
                 can contain</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="search-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>search</h4>
<pre>private&nbsp;<a href="../concurrent_multiset/LockFreeMultiset.MultisetElement.html" title="class in concurrent_multiset">LockFreeMultiset.MultisetElement</a>&lt;<a href="../concurrent_multiset/LockFreeMultiset.html" title="type parameter in LockFreeMultiset">T</a>&gt;&nbsp;search(java.lang.Object&nbsp;element)</pre>
<div class="block">Searches the element inside the multiset.

 <p>The entry <code>cur</code> is not locked.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>element</code> - the element to be found</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the searched element, or the last element
          of the multiset if the element has not been found</dd>
</dl>
</li>
</ul>
<a name="searchAndClean-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>searchAndClean</h4>
<pre>private&nbsp;<a href="../concurrent_multiset/LockFreeMultiset.MultisetElement.html" title="class in concurrent_multiset">LockFreeMultiset.MultisetElement</a>&lt;<a href="../concurrent_multiset/LockFreeMultiset.html" title="type parameter in LockFreeMultiset">T</a>&gt;&nbsp;searchAndClean(java.lang.Object&nbsp;value)</pre>
<div class="block"><p>Searches an element and while traverses the multiset cleans it up
 from the entries that have been logically removed.</p>

 <p><code>suc</code> is the successor of the current <code>cur</code> element and the array <code>mark</code>
 contains the value of the mark bit of <code>cur</code>: if <code>cur</code> is marked then it has to be removed.
 The <code>AtomicMarkableReference.compareAndSet(Object, Object, boolean, boolean)</code>
 atomically checks if <code>cur</code> is the successor of <code>pre</code> and if <code>pre</code> is not marked,
 if these conditions are true then <code>cur</code> can be removed and <code>suc</code> becomes the new successor
 of <code>pre</code>. If the <code>AtomicMarkableReference.compareAndSet(Object, Object, boolean, boolean)</code>
 fails then it is necessary to start again because this means that the method call may be traversing an unreachable
 part of the multiset.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>value</code> - the element to be found</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the predecessor of the element, or the last element
          of the multiset if the element has not been found</dd>
</dl>
</li>
</ul>
<a name="add-java.lang.Object-">
<!--   -->
</a><a name="add-T-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>add</h4>
<pre>public&nbsp;boolean&nbsp;add(<a href="../concurrent_multiset/LockFreeMultiset.html" title="type parameter in LockFreeMultiset">T</a>&nbsp;element)
            throws <a href="../exceptions/NullValueException.html" title="class in exceptions">NullValueException</a>,
                   <a href="../exceptions/FullMultisetException.html" title="class in exceptions">FullMultisetException</a></pre>
<div class="block">Adds a single occurrence of the specified element to the multiset.

 <p>See the more general method <a href="../concurrent_multiset/LockFreeMultiset.html#add-T-int-"><code>add(Object, int)</code></a>.</p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../concurrent_multiset/ConcurrentMultiset.html#add-T-">add</a></code>&nbsp;in interface&nbsp;<code><a href="../concurrent_multiset/ConcurrentMultiset.html" title="interface in concurrent_multiset">ConcurrentMultiset</a>&lt;<a href="../concurrent_multiset/LockFreeMultiset.html" title="type parameter in LockFreeMultiset">T</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>element</code> - the element to be inserted in the multiset</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the insertion is successful</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../exceptions/NullValueException.html" title="class in exceptions">NullValueException</a></code> - if the element is null</dd>
<dd><code><a href="../exceptions/FullMultisetException.html" title="class in exceptions">FullMultisetException</a></code> - if the multiset has already reached its capacity</dd>
</dl>
</li>
</ul>
<a name="contains-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>contains</h4>
<pre>public&nbsp;boolean&nbsp;contains(java.lang.Object&nbsp;element)
                 throws <a href="../exceptions/NullValueException.html" title="class in exceptions">NullValueException</a></pre>
<div class="block">Determines whether the multiset contains the specified elements or not.

 <p>The entry <code>cur</code> is not locked.</p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../concurrent_multiset/ConcurrentMultiset.html#contains-java.lang.Object-">contains</a></code>&nbsp;in interface&nbsp;<code><a href="../concurrent_multiset/ConcurrentMultiset.html" title="interface in concurrent_multiset">ConcurrentMultiset</a>&lt;<a href="../concurrent_multiset/LockFreeMultiset.html" title="type parameter in LockFreeMultiset">T</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>element</code> - the element to be found in the multiset</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the element is present, false otherwise</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../exceptions/NullValueException.html" title="class in exceptions">NullValueException</a></code> - if the element is null</dd>
</dl>
</li>
</ul>
<a name="count-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>count</h4>
<pre>public&nbsp;int&nbsp;count(java.lang.Object&nbsp;element)
          throws <a href="../exceptions/NullValueException.html" title="class in exceptions">NullValueException</a></pre>
<div class="block">Returns the number of occurrences of the specified element in the multiset.

 <p>The entry <code>cur</code> is not locked.</p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../concurrent_multiset/ConcurrentMultiset.html#count-java.lang.Object-">count</a></code>&nbsp;in interface&nbsp;<code><a href="../concurrent_multiset/ConcurrentMultiset.html" title="interface in concurrent_multiset">ConcurrentMultiset</a>&lt;<a href="../concurrent_multiset/LockFreeMultiset.html" title="type parameter in LockFreeMultiset">T</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>element</code> - the element to be found in the multiset</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the occurrences of the element in the multiset</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../exceptions/NullValueException.html" title="class in exceptions">NullValueException</a></code> - if the element is null</dd>
</dl>
</li>
</ul>
<a name="remove-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove</h4>
<pre>public&nbsp;boolean&nbsp;remove(java.lang.Object&nbsp;element)
               throws <a href="../exceptions/NullValueException.html" title="class in exceptions">NullValueException</a></pre>
<div class="block">Removes a single occurrence of the specified element from the multiset, if
 it is present.

 <p>See the more general method <a href="../concurrent_multiset/LockFreeMultiset.html#remove-java.lang.Object-int-"><code>remove(Object, int)</code></a>.</p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../concurrent_multiset/ConcurrentMultiset.html#remove-java.lang.Object-">remove</a></code>&nbsp;in interface&nbsp;<code><a href="../concurrent_multiset/ConcurrentMultiset.html" title="interface in concurrent_multiset">ConcurrentMultiset</a>&lt;<a href="../concurrent_multiset/LockFreeMultiset.html" title="type parameter in LockFreeMultiset">T</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>element</code> - the element to be removed from the multiset</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the occurrence is removed, false if the element is not present</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../exceptions/NullValueException.html" title="class in exceptions">NullValueException</a></code> - if the element is null</dd>
</dl>
</li>
</ul>
<a name="add-java.lang.Object-int-">
<!--   -->
</a><a name="add-T-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>add</h4>
<pre>public&nbsp;int&nbsp;add(<a href="../concurrent_multiset/LockFreeMultiset.html" title="type parameter in LockFreeMultiset">T</a>&nbsp;element,
               int&nbsp;occurrences)
        throws <a href="../exceptions/NullValueException.html" title="class in exceptions">NullValueException</a>,
               <a href="../exceptions/InvalidCountException.html" title="class in exceptions">InvalidCountException</a>,
               <a href="../exceptions/FullMultisetException.html" title="class in exceptions">FullMultisetException</a></pre>
<div class="block">Adds a number of occurrences of the specified element to the multiset.

 <p>If the entry for the specified element already exists in the multiset then increments its
 <code>occurrences</code> field and the number <code>actual_size</code> of elements of the multiset.
 If the entry doesn't exist then it is created and inserted (if the multiset is not full).</p>

 <p>The two entries <code>pre</code> and <code>cur</code> are not locked after the <a href="../concurrent_multiset/LockFreeMultiset.html#searchAndClean-java.lang.Object-"><code>searchAndClean(Object)</code></a>
 phase. When a new entry has to be created, its insertion in the multiset is done by using the
 <code>AtomicMarkableReference.compareAndSet(Object, Object, boolean, boolean)</code>:
 if it fails then it is necessary to start over.</p>

 <p>At the beginning it is checked if the multiset is in <b>read only mode</b>: this happens when the
 <a href="../concurrent_multiset/LockFreeMultiset.html#removeAll-java.util.Collection-"><code>removeAll(Collection)</code></a> is executed on the multiset. The strategy is to wait until the end of the
 execution of the <a href="../concurrent_multiset/LockFreeMultiset.html#removeAll-java.util.Collection-"><code>removeAll(Collection)</code></a> in order to work on the updated multiset and to avoid losing
 any changes performed during the execution of the method.</p>

 <p><b>Linearization point:</b> in the successful case when the predecessor is redirected to the added
 entry (or when the occurrences are updated), in the unsuccessful case when an exception is raised.</p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../concurrent_multiset/ConcurrentMultiset.html#add-T-int-">add</a></code>&nbsp;in interface&nbsp;<code><a href="../concurrent_multiset/ConcurrentMultiset.html" title="interface in concurrent_multiset">ConcurrentMultiset</a>&lt;<a href="../concurrent_multiset/LockFreeMultiset.html" title="type parameter in LockFreeMultiset">T</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>element</code> - the element to be inserted in the multiset</dd>
<dd><code>occurrences</code> - the number of occurrences of the element</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the occurrences of the element before the insertion operation</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../exceptions/NullValueException.html" title="class in exceptions">NullValueException</a></code> - if the element is null</dd>
<dd><code><a href="../exceptions/InvalidCountException.html" title="class in exceptions">InvalidCountException</a></code> - if the number of occurrences is less than 1</dd>
<dd><code><a href="../exceptions/FullMultisetException.html" title="class in exceptions">FullMultisetException</a></code> - if the multiset has already reached its capacity</dd>
</dl>
</li>
</ul>
<a name="remove-java.lang.Object-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove</h4>
<pre>public&nbsp;int&nbsp;remove(java.lang.Object&nbsp;element,
                  int&nbsp;occurrences)</pre>
<div class="block">Removes a number of occurrences of the specified element from the multiset.

 <p>If the entry for the specified element exists in the multiset then distinguishes between
 two cases: if the current counter for that element is greater than the number of occurrences
 to be removed then its <code>occurrences</code> field is decremented by a quantity equals to
 the parameter <code>occurrences</code>, otherwise the entry is marked as logically removed from
 the multiset (and also pointers are rearranged) and the number of entries <code>size</code>
 and the number of elements <code>actual_size</code> inside the multiset are updated.
 If the element is not present in the multiset no changes are performed.</p>

 <p>The two entries <code>pre</code> and <code>cur</code> are not locked after the <a href="../concurrent_multiset/LockFreeMultiset.html#searchAndClean-java.lang.Object-"><code>searchAndClean(Object)</code></a>
 phase. When an entry has to be removed it is marked by using the
 <code>AtomicMarkableReference.compareAndSet(Object, Object, boolean, boolean)</code>:
 if it fails then it is necessary to start over.</p>

 <p>At the beginning it is checked if the multiset is in <b>read only mode</b>: this happens when the
 <a href="../concurrent_multiset/LockFreeMultiset.html#removeAll-java.util.Collection-"><code>removeAll(Collection)</code></a> is executed on the multiset. The strategy is to wait until the end of the
 execution of the <a href="../concurrent_multiset/LockFreeMultiset.html#removeAll-java.util.Collection-"><code>removeAll(Collection)</code></a> in order to work on the updated multiset and to avoid losing
 any changes performed during the execution of the method.</p>

 <p><b>Linearization point:</b> in the successful case when the entry to be removed is
 marked (or when the occurrences are updated), in the unsuccessful case when an exception
 is raised or the element has not been found.</p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../concurrent_multiset/ConcurrentMultiset.html#remove-java.lang.Object-int-">remove</a></code>&nbsp;in interface&nbsp;<code><a href="../concurrent_multiset/ConcurrentMultiset.html" title="interface in concurrent_multiset">ConcurrentMultiset</a>&lt;<a href="../concurrent_multiset/LockFreeMultiset.html" title="type parameter in LockFreeMultiset">T</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>element</code> - the element to be removed from the multiset</dd>
<dd><code>occurrences</code> - the number of occurrences of the element</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the previous number of occurrences of the element</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../exceptions/NullValueException.html" title="class in exceptions">NullValueException</a></code> - if the element is null</dd>
<dd><code><a href="../exceptions/InvalidCountException.html" title="class in exceptions">InvalidCountException</a></code> - if the number of occurrences is less than 1</dd>
</dl>
</li>
</ul>
<a name="removeAll-java.util.Collection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeAll</h4>
<pre>public&nbsp;boolean&nbsp;removeAll(java.util.Collection&nbsp;c)</pre>
<div class="block">Removes all the elements of the collection from the multiset.

 <p>In order to guarantee a single linearization point a new private multiset is created and
 modified, preserving the state of the original one. If an element is contained in the collection
 then the method has to remove a number of occurrences of that element equals
 to its frequency in the collection. If the old occurrences of the element were higher than the
 frequency in the collection then the element is inserted in the temporary multiset
 with the remaining number of occurrences, otherwise it is not inserted. If an element
 is not contained inside the collection then it is copied in the temporary multiset.
 The original multiset is modified only at the end of the method, where all the
 changes become effective.</p>

 <p>The two entries <code>cur</code> and <code>suc</code> are not locked.</p>

 <p>The main issue of this implementation is that any operation performed on the
 multiset during the execution of the method <a href="../concurrent_multiset/LockFreeMultiset.html#removeAll-java.util.Collection-"><code>removeAll(Collection)</code></a> is lost:
 at the end of the method the old multiset is replaced with a new one and the result
 of any concurrent operation performed in the meantime is erased. To avoid this issue the
 choice is to lock the multiset in a <b>read-only state</b>. The methods <a href="../concurrent_multiset/LockFreeMultiset.html#add-T-int-"><code>add(Object, int)</code></a>
 and <a href="../concurrent_multiset/LockFreeMultiset.html#remove-java.lang.Object-int-"><code>remove(Object, int)</code></a> wait until the <a href="../concurrent_multiset/LockFreeMultiset.html#removeAll-java.util.Collection-"><code>removeAll(Collection)</code></a> termination and
 then start their execution.</p>

 <p><b>Linearization point:</b> in the successful case when the original multiset is substituted with
 the new one and the sizes are updated, in the unsuccessful case when an exception is raised.</p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../concurrent_multiset/ConcurrentMultiset.html#removeAll-java.util.Collection-">removeAll</a></code>&nbsp;in interface&nbsp;<code><a href="../concurrent_multiset/ConcurrentMultiset.html" title="interface in concurrent_multiset">ConcurrentMultiset</a>&lt;<a href="../concurrent_multiset/LockFreeMultiset.html" title="type parameter in LockFreeMultiset">T</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>c</code> - the collection containing the elements to be removed from the multiset</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the multiset has been changed, false otherwise</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../exceptions/NullCollectionException.html" title="class in exceptions">NullCollectionException</a></code> - if the collection is null</dd>
</dl>
</li>
</ul>
<a name="getSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSize</h4>
<pre>public&nbsp;int&nbsp;getSize()</pre>
<div class="block">Returns the number of <code>MultisetElement</code> entries inside the multiset.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../concurrent_multiset/ConcurrentMultiset.html#getSize--">getSize</a></code>&nbsp;in interface&nbsp;<code><a href="../concurrent_multiset/ConcurrentMultiset.html" title="interface in concurrent_multiset">ConcurrentMultiset</a>&lt;<a href="../concurrent_multiset/LockFreeMultiset.html" title="type parameter in LockFreeMultiset">T</a>&gt;</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the number of entries in the multiset</dd>
</dl>
</li>
</ul>
<a name="getActualSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getActualSize</h4>
<pre>public&nbsp;int&nbsp;getActualSize()</pre>
<div class="block">Returns the number of elements (the summation of the the occurrences of all the
 elements contained in the multiset).</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../concurrent_multiset/ConcurrentMultiset.html#getActualSize--">getActualSize</a></code>&nbsp;in interface&nbsp;<code><a href="../concurrent_multiset/ConcurrentMultiset.html" title="interface in concurrent_multiset">ConcurrentMultiset</a>&lt;<a href="../concurrent_multiset/LockFreeMultiset.html" title="type parameter in LockFreeMultiset">T</a>&gt;</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the total number of elements in the multiset</dd>
</dl>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toString()</pre>
<div class="block">

 <p>Creates a string containing a representation of the elements
 of the multiset: the elements must be not marked otherwise they
 have to be considered as already removed from the multiset.</p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the representation of the multiset</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LockFreeMultiset.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../concurrent_multiset/LazyMultiset.MultisetElement.html" title="class in concurrent_multiset"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../concurrent_multiset/LockFreeMultiset.MultisetElement.html" title="class in concurrent_multiset"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?concurrent_multiset/LockFreeMultiset.html" target="_top">Frames</a></li>
<li><a href="LockFreeMultiset.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
